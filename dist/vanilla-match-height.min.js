"use strict";(function(){HTMLElement.prototype.matchHeight=function(t){return new o(this,t)};function o(t,i){this.wrapEl=t,this._remains=[];let s={elements:null,byRow:!0,target:null,attributeName:null,attributeValue:null,property:"height",remove:null,events:!0,throttle:80,beforeUpdate:null,afterUpdate:null};if(this.settings=Object.assign(Object.assign({},s),i),this._validateProperty(this.settings.property)||(this.settings.property="height"),this.settings.events){const e=this._applyAll.bind(this);document.readyState!=="loading"?this._applyAll():document.addEventListener("DOMContentLoaded",e,{once:!0}),this.settings.throttle&&this.settings.throttle>0&&(this._bind=this._throttle(e,this.settings.throttle)),this._init()}}o.prototype._init=function(){window.addEventListener("resize",this._bind),window.addEventListener("orientationchange",this._bind)},o.prototype._unbind=function(){window.removeEventListener("resize",this._bind),window.removeEventListener("orientationchange",this._bind)},o.prototype._merge=function(t,i){if(t!=null)for(let s in t)i[s]=t[s];return i},o.prototype._throttle=function(t,i){let s,e;return function(){const r=Date.now();s&&r<s+i?(clearTimeout(e),e=setTimeout(function(){s=r,t()},i)):(s=r,t())}},o.prototype._applyAll=function(){this.settings&&this.settings.beforeUpdate&&this.settings.beforeUpdate(),this._apply(),this.settings.attributeName&&this._validateProperty(this.settings.attributeName)&&this._applyDataApi(this.settings.attributeName),this._applyDataApi("data-match-height"),this._applyDataApi("data-mh"),this.settings&&this.settings.afterUpdate&&this.settings.afterUpdate()},o.prototype._validateProperty=function(t){return String(t).toLowerCase().match(/^([a-z-]{2,})$/)},o.prototype._parse=function(t){return parseFloat(t)||0},o.prototype._rows=function(t){let i=1,s=-1,e=[],r=[];return t.forEach(a=>{let n=a.el.getBoundingClientRect().top-this._parse(window.getComputedStyle(a.el).getPropertyValue("margin-top"));s!=-1&&Math.floor(Math.abs(s-n))>=i&&(e.push(r),r=[],s=-1),r.push(a),s=n}),e.push(r),e},o.prototype._applyDataApi=function(t){let i=Array.from(this.wrapEl.querySelectorAll("["+t+"]"));i.forEach(e=>{this._resetStyle(e,this.settings.property)});const s=new Map;i.forEach(e=>{const r=e.getAttribute(t);r&&(s.has(r)||s.set(r,[]),s.get(r).push(e))}),s.forEach(e=>{this._update(e)})},o.prototype._remove=function(){let t=[],i=this.settings;i.elements?t=Array.from(this.wrapEl.querySelectorAll(i.elements)):i.attributeName&&i.attributeValue&&(t=Array.from(this.wrapEl.querySelectorAll("["+i.attributeName+'="'+i.attributeValue+'"]'))),t.forEach(s=>{s.style.setProperty(i.property,""),s.getAttribute("style")===""&&s.removeAttribute("style")})},o.prototype._apply=function(){let t=this.settings,i=[];t.elements&&t.elements.trim()!=""?i=Array.from(this.wrapEl.querySelectorAll(t.elements)):t.attributeName&&this._validateProperty(t.attributeName)&&t.attributeValue&&t.attributeValue.trim()!=""&&(i=Array.from(this.wrapEl.querySelectorAll("["+t.attributeName+'="'+t.attributeValue+'"]'))),this._update(i)},o.prototype._update=function(t,i){if(t.length===0)return;let s=i||(this.settings.attributeName?this.settings.attributeName:"data-mh");this._remains=Array.prototype.map.call(t,e=>({el:e,top:0,height:0,property:e.getAttribute(s)||s})),this._remains.forEach(e=>{this._resetStyle(e.el,this.settings.property)}),this._process()},o.prototype._process=function(){this._remains.forEach(e=>{const r=e.el.getBoundingClientRect();e.top=this.settings.byRow?r.top-this._parse(window.getComputedStyle(e.el).getPropertyValue("margin-top")):0,e.height=r.height}),this._remains.sort((e,r)=>e.top-r.top&&e.property.localeCompare(r.property));let i=this._rows(this._remains)[0],s=0;this.settings.target?s=this.settings.target.getBoundingClientRect().height:s=Math.max(...i.map(e=>e.height)),i.forEach(e=>{const r=window.getComputedStyle(e.el);if(r.boxSizing==="border-box")this.settings.property&&e.el.style.setProperty(this.settings.property,`${s}px`);else{const n=(parseFloat(r.paddingTop)||0)+(parseFloat(r.paddingBottom)||0)+(parseFloat(r.borderTopWidth)||0)+(parseFloat(r.borderBottomWidth)||0);this.settings.property&&e.el.style.setProperty(this.settings.property,`${s-n}px`)}this.settings.remove&&(this.settings.remove instanceof NodeList?Array.from(this.settings.remove).forEach(n=>{e.el===n&&this.settings.property&&n instanceof HTMLElement&&this._resetStyle(n,this.settings.property)}):e.el===this.settings.remove&&this.settings.property&&this._resetStyle(e.el,this.settings.property))}),this._remains.splice(0,i.length),0<this._remains.length&&this._process()},o.prototype._resetStyle=function(t,i){this._validateProperty(i)&&(t.style.setProperty(i,""),t.getAttribute("style")===""&&t.removeAttribute("style"))}})();
