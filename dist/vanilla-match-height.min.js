"use strict";(function(){HTMLElement.prototype.matchHeight=function(t){return new o(this,t)};function o(t,e){this.wrapEl=t,this._remains=[];let s={elements:null,byRow:!0,target:null,attributeName:null,attributeValue:null,property:"height",remove:null,events:!0,throttle:80,beforeUpdate:null,afterUpdate:null};if(this.settings=Object.assign(Object.assign({},s),e),this._validateProperty(this.settings.property)||(this.settings.property="height"),this.settings.events){const i=this._applyAll.bind(this);document.readyState!=="loading"?this._applyAll():document.addEventListener("DOMContentLoaded",i,{once:!0}),this.settings.throttle&&this.settings.throttle>0&&(this._bind=this._throttle(i,this.settings.throttle)),this._init()}}o.prototype._init=function(){window.addEventListener("resize",this._bind),window.addEventListener("orientationchange",this._bind)},o.prototype._unbind=function(){window.removeEventListener("resize",this._bind),window.removeEventListener("orientationchange",this._bind)},o.prototype._merge=function(t,e){if(t!=null)for(let s in t)e[s]=t[s];return e},o.prototype._throttle=function(t,e){let s,i;return function(){const r=Date.now();s&&r<s+e?(clearTimeout(i),i=setTimeout(function(){s=r,t()},e)):(s=r,t())}},o.prototype._applyAll=function(){this.settings&&this.settings.beforeUpdate&&this.settings.beforeUpdate(),this._apply(),this.settings.attributeName&&this._validateProperty(this.settings.attributeName)&&this._applyDataApi(this.settings.attributeName),this._applyDataApi("data-match-height"),this._applyDataApi("data-mh"),this.settings&&this.settings.afterUpdate&&this.settings.afterUpdate()},o.prototype._validateProperty=function(t){return String(t).toLowerCase().match(/^([a-z-]{2,})$/)},o.prototype._parse=function(t){return parseFloat(t)||0},o.prototype._rows=function(t){let e=1,s=-1,i=[],r=[];return t.forEach(a=>{let n=a.el.getBoundingClientRect().top-this._parse(window.getComputedStyle(a.el).getPropertyValue("margin-top"));s!=-1&&Math.floor(Math.abs(s-n))>=e&&(i.push(r),r=[],s=-1),r.push(a),s=n}),i.push(r),i},o.prototype._applyDataApi=function(t){let e=Array.from(this.wrapEl.querySelectorAll("["+t+"]"));e.forEach(i=>{this._resetStyle(i,this.settings.property)});const s=new Map;e.forEach(i=>{const r=i.getAttribute(t);r&&(s.has(r)||s.set(r,[]),s.get(r).push(i))}),s.forEach(i=>{this._update(i)})},o.prototype._remove=function(){let t=[],e=this.settings;e.elements?t=Array.from(this.wrapEl.querySelectorAll(e.elements)):e.attributeName&&e.attributeValue&&(t=Array.from(this.wrapEl.querySelectorAll("["+e.attributeName+'="'+e.attributeValue+'"]'))),t.forEach(s=>{s.style.setProperty(e.property,""),s.getAttribute("style")===""&&s.removeAttribute("style")})},o.prototype._apply=function(){let t=this.settings,e=[];t.elements&&t.elements.trim()!=""?e=Array.from(this.wrapEl.querySelectorAll(t.elements)):t.attributeName&&this._validateProperty(t.attributeName)&&t.attributeValue&&t.attributeValue.trim()!=""&&(e=Array.from(this.wrapEl.querySelectorAll("["+t.attributeName+'="'+t.attributeValue+'"]'))),this._update(e)},o.prototype._update=function(t){t.length!==0&&(this._remains=Array.prototype.map.call(t,e=>({el:e,top:0,height:0})),this._remains.forEach(e=>{this._resetStyle(e.el,this.settings.property)}),this._process())},o.prototype._process=function(){this._remains.forEach(i=>{const r=i.el.getBoundingClientRect();i.top=this.settings.byRow?r.top-this._parse(window.getComputedStyle(i.el).getPropertyValue("margin-top")):0,i.height=r.height}),this._remains.sort((i,r)=>i.top-r.top);let e=this._rows(this._remains)[0],s=0;this.settings.target?s=this.settings.target.getBoundingClientRect().height:s=Math.max(...e.map(i=>i.height)),e.forEach(i=>{const r=window.getComputedStyle(i.el);if(r.boxSizing==="border-box")this.settings.property&&i.el.style.setProperty(this.settings.property,`${s}px`);else{const n=(parseFloat(r.paddingTop)||0)+(parseFloat(r.paddingBottom)||0)+(parseFloat(r.borderTopWidth)||0)+(parseFloat(r.borderBottomWidth)||0);this.settings.property&&i.el.style.setProperty(this.settings.property,`${s-n}px`)}this.settings.remove&&(this.settings.remove instanceof NodeList?Array.from(this.settings.remove).forEach(n=>{i.el===n&&this.settings.property&&n instanceof HTMLElement&&this._resetStyle(n,this.settings.property)}):i.el===this.settings.remove&&this.settings.property&&this._resetStyle(i.el,this.settings.property))}),this._remains.splice(0,e.length),0<this._remains.length&&this._process()},o.prototype._resetStyle=function(t,e){this._validateProperty(e)&&(t.style.setProperty(e,""),t.getAttribute("style")===""&&t.removeAttribute("style"))}})();
